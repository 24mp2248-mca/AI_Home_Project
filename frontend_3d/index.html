<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Modern 3D House Plan</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    #controls {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      z-index: 100;
      max-width: 250px;
    }
    #controls h2 {
      margin: 0 0 15px 0;
      color: #333;
      font-size: 18px;
      border-bottom: 2px solid #667eea;
      padding-bottom: 8px;
    }
    .control-group {
      margin: 12px 0;
    }
    .control-group label {
      display: block;
      margin-bottom: 6px;
      color: #555;
      font-size: 13px;
      font-weight: 600;
    }
    button {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: none;
      border-radius: 6px;
      background: #667eea;
      color: white;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    button:hover {
      background: #764ba2;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    .view-btn {
      background: #48bb78;
    }
    .view-btn:hover {
      background: #38a169;
    }
    #info {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      padding: 15px 20px;
      border-radius: 8px;
      color: #333;
      font-size: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }
  </style>
</head>
<body>

<div id="controls">
  <h2>üè† House Controls</h2>
  
  <div class="control-group">
    <button class="view-btn" onclick="setView('top')">Top View</button>
    <button class="view-btn" onclick="setView('front')">Front View</button>
    <button class="view-btn" onclick="setView('side')">Side View</button>
    <button class="view-btn" onclick="setView('iso')">3D View</button>
  </div>
  
  <div class="control-group">
    <button onclick="toggleRoof()">Toggle Roof</button>
    <button onclick="toggleFurniture()">Toggle Furniture</button>
    <button onclick="toggleLabels()">Toggle Labels</button>
  </div>
</div>

<div id="info">
  üéÆ Use mouse to rotate, zoom, and pan<br>
  üìê Total Area: ~100 m¬≤
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

<script>
// ==================== SETUP ====================
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xe8f4f8);
scene.fog = new THREE.Fog(0xe8f4f8, 50, 100);

const camera = new THREE.PerspectiveCamera(
  50,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.set(15, 15, 15);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.08;
controls.maxPolarAngle = Math.PI / 2;
controls.minDistance = 5;
controls.maxDistance = 40;

// ==================== LIGHTING ====================
const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
scene.add(ambientLight);

const sunLight = new THREE.DirectionalLight(0xfff5e1, 1);
sunLight.position.set(20, 30, 15);
sunLight.castShadow = true;
sunLight.shadow.mapSize.width = 2048;
sunLight.shadow.mapSize.height = 2048;
sunLight.shadow.camera.near = 0.5;
sunLight.shadow.camera.far = 100;
sunLight.shadow.camera.left = -20;
sunLight.shadow.camera.right = 20;
sunLight.shadow.camera.top = 20;
sunLight.shadow.camera.bottom = -20;
scene.add(sunLight);

const fillLight = new THREE.DirectionalLight(0x9ec8f7, 0.3);
fillLight.position.set(-10, 10, -10);
scene.add(fillLight);

// ==================== GROUND ====================
const groundGeo = new THREE.CircleGeometry(25, 64);
const groundMat = new THREE.MeshStandardMaterial({
  color: 0x7cb342,
  roughness: 0.8
});
const ground = new THREE.Mesh(groundGeo, groundMat);
ground.rotation.x = -Math.PI / 2;
ground.receiveShadow = true;
scene.add(ground);

// Grid
const gridHelper = new THREE.GridHelper(30, 30, 0x999999, 0xcccccc);
gridHelper.position.y = 0.01;
scene.add(gridHelper);

// ==================== GROUPS ====================
const houseGroup = new THREE.Group();
const furnitureGroup = new THREE.Group();
const roofGroup = new THREE.Group();
const labelsGroup = new THREE.Group();
scene.add(houseGroup);
scene.add(furnitureGroup);
scene.add(roofGroup);
scene.add(labelsGroup);

// ==================== MATERIALS ====================
const materials = {
  wall: new THREE.MeshStandardMaterial({ color: 0xf5f5f5, roughness: 0.7 }),
  floor: new THREE.MeshStandardMaterial({ color: 0xdeb887, roughness: 0.6 }),
  door: new THREE.MeshStandardMaterial({ color: 0x8b4513, roughness: 0.5 }),
  window: new THREE.MeshStandardMaterial({ color: 0x87ceeb, transparent: true, opacity: 0.6 }),
  roof: new THREE.MeshStandardMaterial({ color: 0xb22222, roughness: 0.8 })
};

// ==================== BUILDING FUNCTIONS ====================
function createWall(w, h, d, x, y, z, castShadow = true) {
  const wall = new THREE.Mesh(new THREE.BoxGeometry(w, h, d), materials.wall);
  wall.position.set(x, y, z);
  wall.castShadow = castShadow;
  wall.receiveShadow = true;
  return wall;
}

function createWindow(x, y, z, rotation = 0) {
  const windowFrame = new THREE.Mesh(
    new THREE.BoxGeometry(1.2, 1.2, 0.1),
    materials.window
  );
  windowFrame.position.set(x, y, z);
  windowFrame.rotation.y = rotation;
  return windowFrame;
}

function createDoor(x, y, z, rotation = 0) {
  const door = new THREE.Mesh(
    new THREE.BoxGeometry(1, 2.2, 0.1),
    materials.door
  );
  door.position.set(x, y, z);
  door.rotation.y = rotation;
  
  const handle = new THREE.Mesh(
    new THREE.SphereGeometry(0.08, 16, 16),
    new THREE.MeshStandardMaterial({ color: 0xffd700, metalness: 0.8 })
  );
  handle.position.set(x + 0.4, y, z + 0.1);
  door.add(handle);
  
  return door;
}

// ==================== HOUSE STRUCTURE ====================
const houseWidth = 12;
const houseDepth = 10;
const wallHeight = 3;
const wallThickness = 0.2;

// Main Floor
const mainFloor = new THREE.Mesh(
  new THREE.BoxGeometry(houseWidth, 0.3, houseDepth),
  materials.floor
);
mainFloor.position.y = 0.15;
mainFloor.receiveShadow = true;
houseGroup.add(mainFloor);

// Exterior Walls
houseGroup.add(createWall(houseWidth, wallHeight, wallThickness, 0, wallHeight/2, -houseDepth/2)); // Back
houseGroup.add(createWall(houseWidth, wallHeight, wallThickness, 0, wallHeight/2, houseDepth/2));  // Front (with door cutout)
houseGroup.add(createWall(wallThickness, wallHeight, houseDepth, -houseWidth/2, wallHeight/2, 0)); // Left
houseGroup.add(createWall(wallThickness, wallHeight, houseDepth, houseWidth/2, wallHeight/2, 0));  // Right

// Interior Walls - Creating 4 rooms layout
// Vertical divider
houseGroup.add(createWall(wallThickness, wallHeight, houseDepth, 0, wallHeight/2, 0));

// Horizontal dividers
houseGroup.add(createWall(houseWidth/2, wallHeight, wallThickness, -houseWidth/4, wallHeight/2, 0));
houseGroup.add(createWall(houseWidth/2, wallHeight, wallThickness, houseWidth/4, wallHeight/2, 0));

// ==================== DOORS & WINDOWS ====================
// Main entrance door
houseGroup.add(createDoor(0, 1.1, houseDepth/2 + 0.05, 0));

// Interior doors
houseGroup.add(createDoor(-3, 1.1, 0.05, Math.PI/2));
houseGroup.add(createDoor(3, 1.1, 0.05, Math.PI/2));

// Windows
houseGroup.add(createWindow(-4.5, 1.5, -houseDepth/2 + 0.05, 0)); // Back wall
houseGroup.add(createWindow(4.5, 1.5, -houseDepth/2 + 0.05, 0));
houseGroup.add(createWindow(-houseWidth/2 + 0.05, 1.5, -2.5, Math.PI/2)); // Left wall
houseGroup.add(createWindow(houseWidth/2 - 0.05, 1.5, 2.5, Math.PI/2));  // Right wall

// ==================== ROOF ====================
const roofGeometry = new THREE.ConeGeometry(9, 2.5, 4);
const roof = new THREE.Mesh(roofGeometry, materials.roof);
roof.position.y = wallHeight + 1.25;
roof.rotation.y = Math.PI / 4;
roof.castShadow = true;
roofGroup.add(roof);

// ==================== FURNITURE ====================
function createFurniture(w, h, d, x, y, z, color) {
  const furniture = new THREE.Mesh(
    new THREE.BoxGeometry(w, h, d),
    new THREE.MeshStandardMaterial({ color, roughness: 0.6 })
  );
  furniture.position.set(x, y, z);
  furniture.castShadow = true;
  return furniture;
}

// Living Room (Front Left)
furnitureGroup.add(createFurniture(2.5, 0.7, 1, -3.5, 0.65, 3, 0x4a5568)); // Sofa
furnitureGroup.add(createFurniture(1.5, 0.8, 0.1, -3.5, 0.7, 1, 0x1a202c)); // TV
furnitureGroup.add(createFurniture(1, 0.4, 1, -1.5, 0.5, 3.5, 0x8b7355)); // Coffee table

// Bedroom (Front Right)
furnitureGroup.add(createFurniture(2, 0.5, 2.5, 4, 0.55, 3, 0x6b5b95)); // Bed
furnitureGroup.add(createFurniture(1, 1.5, 0.6, 2.5, 1.05, 1.5, 0x8b4513)); // Wardrobe

// Kitchen (Back Left)
furnitureGroup.add(createFurniture(2, 0.9, 0.6, -4, 0.75, -3.5, 0xd4d4d4)); // Counter
furnitureGroup.add(createFurniture(0.6, 0.6, 0.6, -2, 0.6, -3.5, 0xe5e5e5)); // Stove

// Bathroom (Back Right)
furnitureGroup.add(createFurniture(0.8, 0.5, 0.6, 4, 0.55, -3.5, 0xffffff)); // Sink
furnitureGroup.add(createFurniture(0.8, 0.8, 0.8, 2.5, 0.7, -3.5, 0xf0f0f0)); // Toilet

// ==================== LABELS ====================
function createLabel(text, x, y, z, color = '#333') {
  const canvas = document.createElement('canvas');
  canvas.width = 512;
  canvas.height = 128;
  const ctx = canvas.getContext('2d');
  
  ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
  ctx.roundRect(10, 10, 492, 108, 15);
  ctx.fill();
  
  ctx.fillStyle = color;
  ctx.font = 'bold 48px Arial';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText(text, 256, 64);
  
  const texture = new THREE.CanvasTexture(canvas);
  const spriteMat = new THREE.SpriteMaterial({ map: texture });
  const sprite = new THREE.Sprite(spriteMat);
  sprite.scale.set(4, 1, 1);
  sprite.position.set(x, y, z);
  
  return sprite;
}

labelsGroup.add(createLabel('Living Room', -3, 2.2, 2.5, '#667eea'));
labelsGroup.add(createLabel('Bedroom', 3.5, 2.2, 2.5, '#48bb78'));
labelsGroup.add(createLabel('Kitchen', -3.5, 2.2, -2.5, '#ed8936'));
labelsGroup.add(createLabel('Bathroom', 3.5, 2.2, -2.5, '#4299e1'));

// ==================== CONTROLS ====================
let showRoof = true;
let showFurniture = true;
let showLabels = true;

function toggleRoof() {
  showRoof = !showRoof;
  roofGroup.visible = showRoof;
}

function toggleFurniture() {
  showFurniture = !showFurniture;
  furnitureGroup.visible = showFurniture;
}

function toggleLabels() {
  showLabels = !showLabels;
  labelsGroup.visible = showLabels;
}

function setView(view) {
  let pos;
  switch(view) {
    case 'top':
      pos = { x: 0, y: 25, z: 0 };
      break;
    case 'front':
      pos = { x: 0, y: 8, z: 20 };
      break;
    case 'side':
      pos = { x: 20, y: 8, z: 0 };
      break;
    case 'iso':
    default:
      pos = { x: 15, y: 15, z: 15 };
  }
  
  camera.position.set(pos.x, pos.y, pos.z);
  controls.target.set(0, 0, 0);
  controls.update();
}

// ==================== ANIMATION ====================
function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();

// ==================== RESIZE ====================
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>